(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7142e3c3","chunk-b761bdb6","chunk-14d55a3a","chunk-2d0ceb17"],{"36ae":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("imp-panel",[i("h3",{staticClass:"box-title",staticStyle:{width:"100%"},attrs:{slot:"header"},slot:"header"},[i("el-button",{attrs:{type:"primary","suffix-icon":"el-icon-plus"},on:{click:e.newAdd}},[e._v("新增")]),i("el-button",{attrs:{type:"danger","suffix-icon":"el-icon-delete"},on:{click:e.batchDelete}},[e._v("删除")])],1),i("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{slot:"body",gutter:18},slot:"body"},[i("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{span:6,xs:24,sm:24,md:6,lg:6}},[e.menuTree?i("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"menuTree",attrs:{data:e.router.routerList,"show-checkbox":"","highlight-current":"","render-content":e.renderContent,clearable:"","node-key":"id",props:e.defaultProps},on:{"node-click":e.handleNodeClick}}):e._e()],1),i("el-col",{attrs:{span:18,xs:24,sm:24,md:18,lg:18}},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"text item"},[i("el-form",{ref:"form",attrs:{model:e.form}},[i("el-form-item",{attrs:{label:"父级","label-width":e.formLabelWidth}},[i("el-select-tree",{attrs:{treeData:e.router.routerList,propNames:e.defaultProps,clearable:"",placeholder:"请选择父级"},model:{value:e.form.parent_id,callback:function(t){e.$set(e.form,"parent_id",t)},expression:"form.parent_id"}})],1),i("el-form-item",{attrs:{label:"链接","label-width":e.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1),i("el-form-item",{attrs:{label:"文件路径","label-width":e.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.component,callback:function(t){e.$set(e.form,"component",t)},expression:"form.component"}})],1),i("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"标题","label-width":e.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),i("el-form-item",{attrs:{label:"图标","label-width":e.formLabelWidth}},[i("svg-icon",{attrs:{"icon-class":e.form.icon}}),i("el-button",{attrs:{type:"text"},on:{click:function(t){e.selectIconDialog=!0}}},[e._v("选择")])],1),i("el-form-item",{attrs:{label:"类型","label-width":e.formLabelWidth}},[i("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[i("el-radio",{attrs:{label:1}},[e._v("菜单")]),i("el-radio",{attrs:{label:2}},[e._v("按钮")])],1)],1),i("el-form-item",{attrs:{label:"是否显示","label-width":e.formLabelWidth}},[i("el-radio-group",{model:{value:e.form.hidden,callback:function(t){e.$set(e.form,"hidden",t)},expression:"form.hidden"}},[i("el-radio",{attrs:{label:0}},[e._v("显示")]),i("el-radio",{attrs:{label:1}},[e._v("不显示")])],1)],1),i("el-form-item",{attrs:{label:"排序","label-width":e.formLabelWidth}},[i("el-slider",{model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1),i("el-form-item",{attrs:{label:"模型","label-width":e.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}})],1),i("el-form-item",{attrs:{label:"","label-width":e.formLabelWidth}},[i("el-button",{attrs:{type:"primary"},domProps:{textContent:e._s(e.form.id?"修改":"新增")},on:{click:e.onSubmit}}),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.form.id&&null!=e.form.id,expression:"form.id && form.id!=null"}],attrs:{type:"danger","suffix-icon":"el-icon-delete"},on:{click:e.deleteSelected}},[e._v("删除 ")])],1)],1)],1),i("el-dialog",{attrs:{title:"选择图标",visible:e.selectIconDialog},on:{"update:visible":function(t){e.selectIconDialog=t}}},[i("div",{staticClass:"select-tree icons-container"},[i("el-scrollbar",{staticClass:"is-empty",attrs:{tag:"div","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[i("div",{staticClass:"icons-wrapper"},e._l(e.iconsMap,(function(t){return i("div",{key:t,on:{click:function(i){return e.handleClipboard(t)}}},[i("el-tooltip",{attrs:{placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(t)+" "+e._s(e.generateIconCode(t))+" ")]),i("div",{staticClass:"icon-item"},[i("svg-icon",{attrs:{"icon-class":t}}),i("span",[e._v(e._s(t))])],1)])],1)})),0)])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.selectIconDialog=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.selectIconDialog=!1}}},[e._v("确 定")])],1)])],1)],1)],1)],1)},n=[],o=(i("a4d3"),i("4de4"),i("d81d"),i("e439"),i("dbb4"),i("b64b"),i("ac1f"),i("1276"),i("159b"),i("ade3")),r=i("2f62"),s=i("ded0"),a=i("9dfb"),c=i("6117"),d=i("eab7"),h=i("d3977");function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,l)}return i}function f(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){Object(o["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var p={mixins:[c["default"]],components:{"imp-panel":s["default"],"el-select-tree":a["default"]},data:function(){return{buildLoading:!1,selectIconDialog:!1,formLabelWidth:"100px",defaultProps:{children:"children",label:"name",id:"id"},maxId:7e6,menuTree:[],form:{id:null,name:"",sort:0,icon:"",path:"",hidden:"",parent_id:0,noCache:1,component:"",title:"",type:"",model:""},iconsMap:[]}},computed:f({},Object(r["b"])(["router","loading"])),mounted:function(){var e=h["default"].state.iconsMap.map((function(e){return e.default.id.split("-")[1]}));this.iconsMap=e},created:function(){this.load()},methods:{handleClipboard:function(e){this.selectIconDialog=!1,this.form.icon=e},generateIconCode:function(e){return'<svg-icon icon-class="'.concat(e,'" />')},load:function(){this.$store.dispatch("getRouter")},selectIcon:function(e){this.form.icon=e.target.className,this.selectIconDialog=!1},renderContent:function(e,t){var i=t.node,l=t.data;return e("span",[e("span",[e("span",[e("svg-icon",{attrs:{"icon-class":l.icon}})," ",i.label])])])},newAdd:function(){this.form={id:null,name:"",sort:0,icon:"",path:"",hidden:"",parent_id:null}},deleteSelected:function(){this.batchDelete()},batchDelete:function(){var e=this,t=this.$refs.menuTree.getCheckedKeys();null===t||t.length<=0?this.$message.warning("请选择要删除的资源"):this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i={id:t},l=e;e.$store.dispatch("deleteRouter",i).then((function(){e.$message("操作成功"),l.load()})).catch((function(){e.$message("操作失败")}))}))},handleNodeClick:function(e){this.form=Object(d["a"])({},e)},onSubmit:function(){var e=this.form,t=this;null===this.form.id&&(this.form.id=0),null===this.form.parent_id&&(this.form.parent_id=0),this.form.id>0?this.$store.dispatch("updateRouter",f({},e,{resource_id:e.id})).then((function(){t.load()})):this.$store.dispatch("addRouter",e).then((function(){t.load()}))}}},m=p,b=(i("de07"),i("2877")),v=Object(b["a"])(m,l,n,!1,null,"be03e65a",null);t["default"]=v.exports},4828:function(e,t,i){"use strict";var l=i("a015"),n=i.n(l);n.a},6117:function(e,t,i){"use strict";i.r(t);i("c740"),i("4e82"),i("a434");var l=function e(t,i){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"children";if(!t||null===t||t.length<=0)return null;for(var o=0;o<t.length;o++){if(t[o][l]===i)return t[o];var r=e(t[o][n],i,l,n);if(null!==r)return r}return null},n=function e(t,i){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"parentId",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"children";if(!(null===t||t.length<=0)){if(!i[n]||null===i[n]){var r=t.findIndex((function(e){return e.sort>i.sort}));return-1===r&&(r=t.length),void t.splice(r,0,i)}for(var s=0;s<t.length;s++){var a=t[s];if(i[n]===a[l])if(a[o]&&a[o].length>0){var c=a[o].findIndex((function(e){return e.sort>i.sort}));-1===c&&(c=a[o].length),a[o].splice(c,0,i)}else a[o]=[],a[o].push(i);else e(a[o],i,l,n,o)}}},o=function e(t,i){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"children";if(!t||null===t||t.length<=0)return!0;for(var o=0;o<t.length;o++){if(t[o][l]===i)return t.splice(o,1),!0;var r=e(t[o][n],i,l,n);if(r)return r}return!1},r=function e(t,i){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"children";if(t&&null!==t&&!(t.length<=0)&&i&&null!==i&&!(i.length<=0))for(var o=0;o<t.length;o++)i.findIndex((function(e){return e===t[o][l]}))>-1?(t.splice(o,1),o--):e(t[o][n],i,l,n)},s=function e(t,i){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"children";if(!t||null===t||t.length<=0)return!1;for(var o=0;o<t.length;o++){if(t[o][l]===i[l])return console.log(t[o][l],i[l]),t.splice(o,1,i),!0;var r=e(t[o][n],i,l,n);if(r)return r}return!1};t["default"]={methods:{findFromTree:l,appendTreeNode:n,deleteFromTree:o,updateTreeNode:s,batchDeleteFromTree:r}}},"9dfb":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"el-select"},[e.multiple?i("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":e.inputWidth-32+"px"},on:{click:function(t){return t.stopPropagation(),e.toggleMenu(t)}}},[i("transition-group",{on:{"after-leave":e.resetInputHeight}},e._l(e.selected,(function(t){return i("el-tag",{key:t.id,attrs:{closable:"",type:"primary","close-transition":""},on:{close:function(i){return e.deleteTag(i,t)}}},[i("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t[e.propNames.label]))])])})),1)],1):e._e(),i("el-input",{ref:"reference",attrs:{type:"text",placeholder:e.currentPlaceholder,name:e.name,size:e.size,disabled:e.disabled,readonly:e.multiple,"validate-event":!1,icon:e.iconClass},on:{focus:function(t){e.visible=!0},click:e.handleIconClick},nativeOn:{mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.selectedLabel,callback:function(t){e.selectedLabel=t},expression:"selectedLabel"}}),i("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.doDestroy,"after-enter":e.handleMenuEnter}},[i("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:e.visible&&!1!==e.emptyText,expression:"visible && emptyText !== false"}],ref:"popper"},[i("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.treeData&&!e.loading,expression:"treeData && !loading"}],staticClass:"is-empty",attrs:{tag:"div","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[i("el-tree",{ref:"tree",attrs:{data:e.treeData,"show-checkbox":e.multiple,"node-key":"id","check-strictly":"",props:e.propNames},on:{"check-change":e.handleCheckChange,"node-click":e.handleTreeNodeClick}})],1)],1)],1)],1)},n=[],o=(i("4de4"),i("c975"),i("a434"),i("a9e3"),i("159b"),i("f6f4")),r=i("d4b4"),s=i("2659"),a=i("9169"),c=i("526f"),d=i("2f7b"),h=i("9206"),u=i("6117"),f={large:42,small:30,mini:22},p={mixins:[o["a"],r["a"],u["default"]],name:"ElSelectTree",componentName:"ElSelectTree",computed:{iconClass:function(){var e=this.clearable&&!this.disabled&&this.inputHovering&&!this.multiple&&void 0!==this.value&&null!==this.value&&""!==this.value;return e?"circle-close is-show-close":"caret-top"},emptyText:function(){return this.loading?this.loadingText||this.t("el.select.loading"):0===this.treeData.length?this.noDataText||this.t("el.select.noData"):null}},components:{ElSelectMenu:s["a"]},directives:{Clickoutside:a["a"]},props:{name:String,value:{},treeData:Array,size:String,disabled:Boolean,clearable:Boolean,loading:Boolean,popperClass:String,loadingText:String,noDataText:String,multiple:Boolean,propNames:{type:Object,default:function(){return{children:"children",label:"label",id:"id"}}},multipleLimit:{type:Number,default:0},placeholder:{type:String,default:function(){return Object(h["a"])("el.select.placeholder")}}},data:function(){return{selected:this.multiple?[]:{},inputLength:20,inputWidth:0,currentPlaceholder:"",dropdownUl:null,visible:!1,selectedLabel:"",bottomOverflow:0,topOverflow:0,inputHovering:!1}},watch:{value:function(e){this.handleResize(),this.currentPlaceholder=e?"":this.placeholder,this.setSelected(e),this.$emit("change",e),this.dispatch("ElFormItem","el.form.change",e)},visible:function(e){e?(this.handleIconShow(),this.broadcast("ElSelectDropdown","updatePopper")):(this.$refs.reference.$el.querySelector("input").blur(),this.handleIconHide(),this.broadcast("ElSelectDropdown","destroyPopper"),this.multiple||(this.inputLength=20,this.getOverflows())),this.$emit("visible-change",e)}},methods:{handleIconHide:function(){var e=this.$el.querySelector(".el-input__icon");e&&Object(c["e"])(e,"is-reverse")},handleIconShow:function(){var e=this.$el.querySelector(".el-input__icon");e&&!Object(c["c"])(e,"el-icon-circle-close")&&Object(c["a"])(e,"is-reverse")},handleMenuEnter:function(){this.dropdownUl||(this.dropdownUl=this.$refs.popper.$el.querySelector(".el-select-dropdown__wrap"),this.getOverflows()),!this.multiple&&this.dropdownUl&&this.resetMenuScroll()},getOverflows:function(){if(this.dropdownUl&&this.selected&&this.selected.$el){var e=this.selected.$el.getBoundingClientRect(),t=this.$refs.popper.$el.getBoundingClientRect();this.bottomOverflow=e.bottom-t.bottom,this.topOverflow=e.top-t.top}},resetMenuScroll:function(){this.bottomOverflow>0?this.dropdownUl.scrollTop+=this.bottomOverflow:this.topOverflow<0&&(this.dropdownUl.scrollTop+=this.topOverflow)},setSelected:function(e){e?this.multiple?(this.$refs.tree.setCheckedKeys(e),this.selected=this.$refs.tree.getCheckedNodes()):(this.selected=this.findFromTree(this.treeData,e,this.propNames.id,this.propNames.children),this.selectedLabel=this.selected?this.selected[this.propNames.label]:""):(this.selected=this.multiple?[]:{},this.selectedLabel="")},handleIconClick:function(e){this.iconClass.indexOf("circle-close")>-1?this.deleteSelected(e):this.toggleMenu()},doDestroy:function(){this.$refs.popper&&this.$refs.popper.doDestroy()},handleClose:function(){this.visible=!1},managePlaceholder:function(){""!==this.currentPlaceholder&&(this.currentPlaceholder=this.$refs.input.value?"":this.cachedPlaceHolder)},resetInputState:function(e){8!==e.keyCode&&this.toggleLastOptionHitState(!1),this.inputLength=15*this.$refs.input.value.length+20,this.resetInputHeight()},resetInputHeight:function(){var e=this;this.$nextTick((function(){if(e.$refs.reference){var t=e.$refs.reference.$el.childNodes,i=[].filter.call(t,(function(e){return"INPUT"===e.tagName}))[0];i.style.height=Math.max(e.$refs.tags.clientHeight+6,f[e.size]||36)+"px",e.visible&&!1!==e.emptyText&&e.broadcast("ElSelectDropdown","updatePopper")}}))},handleTreeNodeClick:function(e){this.multiple||(this.$emit("input",e.id),this.visible=!1,this.selectedLabel=e[this.propNames.label],this.selected=e,this.handleResize())},handleCheckChange:function(){if(this.multiple){this.selected=this.$refs.tree.getCheckedNodes();var e=[];this.selected&&this.selected.forEach((function(t){e.push(t.id)})),this.$emit("input",e),this.handleResize()}},toggleMenu:function(){this.visible||this.disabled||(this.visible=!this.visible)},resetScrollTop:function(){var e=this.options[this.hoverIndex].$el.getBoundingClientRect().bottom-this.$refs.popper.$el.getBoundingClientRect().bottom,t=this.options[this.hoverIndex].$el.getBoundingClientRect().top-this.$refs.popper.$el.getBoundingClientRect().top;e>0&&(this.dropdownUl.scrollTop+=e),t<0&&(this.dropdownUl.scrollTop+=t)},deleteSelected:function(e){e.stopPropagation(),this.$emit("input",""),this.selected={},this.selectedLabel="",this.visible=!1},deleteTag:function(e,t){var i=this.selected.indexOf(t);i>-1&&!this.disabled&&(this.value.splice(i,1),this.selected.splice(i,1),this.$emit("remove-tag",t)),e.stopPropagation()},resetInputWidth:function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width},handleResize:function(){this.resetInputWidth(),this.multiple?this.resetInputHeight():this.inputLength=20}},created:function(){this.cachedPlaceHolder=this.currentPlaceholder=this.placeholder,this.multiple&&!Array.isArray(this.value)&&this.$emit("input",[]),!this.multiple&&Array.isArray(this.value)&&this.$emit("input",""),this.setSelected(),this.$on("setSelected",this.setSelected)},mounted:function(){var e=this;Object(d["a"])(this.$el,this.handleResize),this.$nextTick((function(){e.$refs.reference&&e.$refs.reference.$el&&(e.inputWidth=e.$refs.reference.$el.getBoundingClientRect().width)}))},beforeDestroy:function(){this.$el&&this.handleResize&&Object(d["b"])(this.$el,this.handleResize)}},m=p,b=i("2877"),v=Object(b["a"])(m,l,n,!1,null,null,null);t["default"]=v.exports},a015:function(e,t,i){},ab42:function(e,t,i){},de07:function(e,t,i){"use strict";var l=i("ab42"),n=i.n(l);n.a},ded0:function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"box"},[e.title||e.$slots.header?i("div",{staticClass:"box-header",class:{"with-border":e.widthBorder}},[e._t("header",[e.title?i("h3",{staticClass:"box-title",domProps:{textContent:e._s(e.title)}}):e._e()])],2):e._e(),i("div",{staticClass:"box-body"},[e.$slots.body?e._t("body",[e._v(" 暂无内容显示 ")]):e._t("default")],2),e.footer?i("div",{staticClass:"box-footer",domProps:{textContent:e._s(e.footer)}}):e._e()])},n=[],o={name:"ImpPanel",props:{widthBorder:{type:Boolean},title:{type:String},footer:{type:String}}},r=o,s=(i("4828"),i("2877")),a=Object(s["a"])(r,l,n,!1,null,"1ded72f0",null);t["default"]=a.exports}}]);