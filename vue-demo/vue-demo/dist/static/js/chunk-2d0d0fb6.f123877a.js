(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d0fb6"],{"69fc":function(e,o,t){"use strict";t.r(o);var r=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form_"+e.model.model_index,attrs:{rules:e.model.form.rules,model:e.model.form.model,"label-width":e.model.form.config.label_width?e.model.form.config.label_width:"80px"}},[e._l(e.model.form.items,(function(o,r){return["add"===e.formStatus||"update"===e.formStatus&&o.show_update_form?t("el-form-item",{key:r,ref:e.model.model_index+o["prop"],refInFor:!0,attrs:{label:e.$t(e.model.model_index+".form."+o.label_key+".label"),prop:o.prop,error:o.error}},["input"===o.type?["add"===e.formStatus||o.can_update?["number"===o.input_type?[t("el-input",{attrs:{type:o["input_type"],maxlength:e.GLOBAL_CONFIG.inputMaxLength,onKeypress:"return(/[\\d]/.test(String.fromCharCode(event.keyCode)))"},model:{value:e.model.form.model[o["prop"]],callback:function(t){e.$set(e.model.form.model,o["prop"],t)},expression:"model.form.model[item['prop']]"}})]:[t("el-input",{attrs:{maxlength:e.GLOBAL_CONFIG.inputMaxLength},model:{value:e.model.form.model[o["prop"]],callback:function(t){e.$set(e.model.form.model,o["prop"],t)},expression:"model.form.model[item['prop']]"}})]]:[e._v(" "+e._s(e.model.form.model[o["prop"]])+" ")]]:e._e(),"radio"===o.type?[t("el-radio-group",{model:{value:e.model.form.model[o["prop"]],callback:function(t){e.$set(e.model.form.model,o["prop"],t)},expression:"model.form.model[item['prop']]"}},e._l(o.options,(function(o,r){return t("el-radio",{key:r,attrs:{label:o.value}},[e._v(e._s(o.label))])})),1)]:e._e(),"checkbox"===o.type?[t("el-checkbox-group",{model:{value:e.model.form.model[o["prop"]],callback:function(t){e.$set(e.model.form.model,o["prop"],t)},expression:"model.form.model[item['prop']]"}},e._l(o.options,(function(o,r){return t("el-checkbox",{key:r,attrs:{label:o.value}},[e._v(e._s(o.label))])})),1)]:e._e(),"datePicker"===o.type?[t("el-date-picker",{model:{value:e.model.form.model[o["prop"]],callback:function(t){e.$set(e.model.form.model,o["prop"],t)},expression:"model.form.model[item['prop']]"}})]:e._e(),"select"===o.type?[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.model.form.model[o["prop"]],callback:function(t){e.$set(e.model.form.model,o["prop"],t)},expression:"model.form.model[item['prop']]"}},e._l(o.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),"file"===o.type?void 0:e._e()]:e._e()],2):e._e()]})),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(o){return e.onSubmit("form_"+e.model.model_index)}}},[e._v(e._s(e.$t("formCommon.submit.label")))]),t("el-button",{ref:e.model.model_index+"rest_btn",on:{click:function(o){return e.resetForm("form_"+e.model.model_index)}}},[e._v(e._s(e.$t("formCommon.reset.label")))])],1)],2)},l=[],m=(t("a4d3"),t("4de4"),t("c975"),t("d81d"),t("e439"),t("dbb4"),t("b64b"),t("d3b7"),t("ac1f"),t("1276"),t("159b"),t("ddb0"),t("ade3")),a=t("2f62");function n(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?n(Object(t),!0).forEach((function(o){Object(m["a"])(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}var i={name:"CForm",props:{model:{type:Object,required:!0,default:function(){}}},data:function(){return{formStatus:"add",formBaseData:""}},created:function(){this.dealRules(),this.formBaseData=this.model.form.model,this.dealJudgeFormStatus(this.$route)},computed:d({},Object(a["b"])(["language","loading"])),methods:{onSubmit:function(e){var o=this;this.$refs[e].validate((function(e){if(!e)return!1;o.model.form.items.map((function(e){e.error=void 0}));var t=o.dealSubmitUrlAndParams();o.$store.dispatch(t.action,t.params).then((function(e){200===e.status?o.$emit("on-succes"):o.$emit("on-error")})).catch((function(e){if(422===e.status){var t=e.data.errors;t.map((function(e){o.model.form.items.map((function(o){o.prop===e.field&&(o.error=e.code)}))}))}}))}))},resetForm:function(e){this.$refs[e].resetFields()},dealSubmitUrlAndParams:function(){var e={action:"",params:{}};return-1!==_.split(this.$route.path,"/").indexOf("update")?(e.action=this.model.form.config.update_url,e.params=d({},this.model.form.model,{resource_id:this.$route.params.id})):(e.action=this.model.form.config.store_url,e.params=this.model.form.model),e},dealRules:function(){var e=this;for(var o in this.model.form.rules)this.model.form.rules[o].map((function(t){var r=e.$t(e.model.model_index+".form."+o+".label");t["message"]=e.$t("validate."+t["message_key"],{label:r})}))},dealJudgeFormStatus:function(e){-1!==_.split(e.path,"/").indexOf("update")?(this.formStatus="update",this.$store.dispatch(this.model.form.config.show_url,{resource_id:_.values(this.$route.params)[0]})):(this.formStatus="add",this.model.form.model=this.formBaseData)}},beforeDestroy:function(){"add"===this.formStatus&&this.resetForm("form_"+this.model.model_index)},watch:{language:function(){this.dealRules()},$route:function(e){this.dealJudgeFormStatus(e)}}},s=i,u=t("2877"),p=Object(u["a"])(s,r,l,!1,null,null,null);o["default"]=p.exports}}]);