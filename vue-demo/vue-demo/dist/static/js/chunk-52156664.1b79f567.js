(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52156664"],{"38b4":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-container"},[o("lang-select",{staticClass:"set-language"}),o("div",{staticClass:"login-container-title"},[o("span",[e._v(e._s(e.$t("login.title")))])]),o("el-form",{ref:"loginForm",attrs:{model:e.login.model,"label-position":"left",rules:e.login.rules}},[o("el-form-item",{attrs:{prop:"name",error:e.login.items[0].error}},[o("el-input",{attrs:{name:"name",type:"text",autocomplete:"off",placeholder:e.$t("login.form.name.placeholder"),maxlength:"30"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.login.model.name,callback:function(t){e.$set(e.login.model,"name",t)},expression:"login.model.name"}},[o("svg-icon",{attrs:{slot:"prefix","icon-class":"name"},slot:"prefix"})],1)],1),o("el-form-item",{attrs:{prop:"password",error:e.login.items[1].error}},[o("el-input",{attrs:{name:"password",type:"password",autocomplete:"off",placeholder:e.$t("login.form.password.placeholder"),maxlength:"30"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.login.model.password,callback:function(t){e.$set(e.login.model,"password",t)},expression:"login.model.password"}},[o("svg-icon",{attrs:{slot:"prefix","icon-class":"password"},slot:"prefix"})],1)],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showCode>3,expression:"showCode>3"}],attrs:{prop:"captcha",error:e.login.items[2].error}},[o("el-input",{staticClass:"login-captcha",attrs:{name:"captcha",type:"text",autocomplete:"off",placeholder:e.$t("login.form.captcha.placeholder"),maxlength:"30"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.login.model.captcha,callback:function(t){e.$set(e.login.model,"captcha",t)},expression:"login.model.captcha"}},[o("svg-icon",{attrs:{slot:"prefix","icon-class":"captcha"},slot:"prefix"})],1),o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.codeLoading,expression:"codeLoading"}],staticStyle:{cursor:"pointer",display:"inline-block"},on:{click:e.refreshCaptcha}},[o("img",{staticClass:"login-captcha-img",attrs:{src:e.login.model.img,alt:"加载中"}}),o("input",{directives:[{name:"model",rawName:"v-model",value:e.login.model.ckey,expression:"login.model.ckey"}],attrs:{type:"text",hidden:""},domProps:{value:e.login.model.ckey},on:{input:function(t){t.target.composing||e.$set(e.login.model,"ckey",t.target.value)}}})])],1),o("el-form-item",{staticClass:"rember-checkbox",staticStyle:{background:"#fff"}},[o("el-checkbox",{attrs:{fill:"#2BAAB1"},model:{value:e.login.model.rember_pwd,callback:function(t){e.$set(e.login.model,"rember_pwd",t)},expression:"login.model.rember_pwd"}},[e._v(e._s(e.$t("login.form.rember_pwd")))]),o("br"),o("el-alert",{attrs:{title:"测试账号",type:"info",description:"admin:123456"}})],1),o("el-form-item",[o("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{type:"primary",loading:e.loginLoading},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v(e._s(e.$t("login.form.login")))])],1),o("el-form-item",[o("el-button",{staticStyle:{width:"100%","margin-bottom":"30px",height:"40px"},attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.goToRegister(t)}}},[e._v(e._s(e.$t("login.form.register")))])],1)],1)],1)},r=[],i=(o("a4d3"),o("4de4"),o("a15b"),o("d81d"),o("b0c0"),o("e439"),o("dbb4"),o("b64b"),o("159b"),o("ade3")),a=o("2f62"),l=o("1131");function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function c(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach((function(t){Object(i["a"])(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var d={computed:c({},Object(a["b"])(["login"])),components:{LangSelect:l["default"]},created:function(){this.showCode>3&&this.refreshCaptcha()},data:function(){return{codeLoading:!0,loginLoading:!1,showCode:storage.get("showCode")?storage.get("showCode"):0}},methods:{handleLogin:function(){var e=this;this.loginLoading=!0,this.$refs["loginForm"].validate((function(t){if(!t)return!1;e.clearError();var o={name:e.login.model.name,password:e.login.model.password,ckey:e.login.model.ckey,captcha:e.login.model.captcha};e.$store.dispatch("login",o).then((function(t){if(e.loginLoading=!1,200===t.status){e.showCode=0,storage.set("showCode",e.showCode);var o=e.$loading({lock:!0,text:e.$t("common.loading"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e.$store.dispatch("getUserInfo").then((function(){e.$router.push(storage.get("indexPage")),o.close()}))}})).catch((function(t){e.showCode++,storage.set("showCode",e.showCode),e.loginLoading=!1;var o=t.data.errors;Object.keys(o).map((function(t){e.login.items.map((function(e){e.prop===t&&(e.error=o[t].join(";"))}))}))}))}))},refreshCaptcha:function(){var e=this;this.codeLoading=!0,this.$store.dispatch("getCaptcha").then((function(){e.codeLoading=!1}))},goToRegister:function(){this.$router.push("/register")},clearError:function(){this.login.items.map((function(e){e.error=void 0}))}},watch:{showCode:function(e){e>3&&this.refreshCaptcha()}}},p=d,g=(o("391d"),o("2877")),m=Object(g["a"])(p,n,r,!1,null,null,null);t["default"]=m.exports},"391d":function(e,t,o){"use strict";var n=o("3a85"),r=o.n(n);r.a},"3a85":function(e,t,o){}}]);